(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"37":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(4),i=_interopRequireDefault(o),l=_interopRequireDefault(n(1)),s=n(56),r=_interopRequireDefault(n(61));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}n(58);var u=function(e){function Index(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationBarTitleText":"首页"},e.onCloseCountdown=function(t){e.setState({"isClose":t})},e.onTimeEnd=function(){(0,o.showToast)({"title":"倒计时结束"}),console.log("倒计时结束触发事件")},e.onTimeTick=function(t){e.setState({"second":t})},e.onCountTick=function(e){console.log(e)},e.onDateChange=function(t){e.setState({"targetTime":t.detail.value})},e.onInput=function(t,n){"count"===t?e.setState({"inputCount":n.detail.value}):e.setState({"inputTargetTime":n.detail.value})},e.onBtnClick=function(t){if("count"===t)e.setState({"count":e.state.inputCount});else{var n=new Date(e.state.inputTargetTime);if(!(n instanceof Date)||isNaN(n))return void(0,o.showToast)({"icon":"none","title":"Invalid Date"});e.setState({"targetTime":e.state.inputTargetTime})}},e.state={"targetTime":"","count":60,"time1":"","isClose":!1,"inputTargetTime":"","inputCount":""},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,i.default.Component),a(Index,[{"key":"componentDidMount","value":function componentDidMount(){var e=this;this.setState({"targetTime":"2019-12-30 20:00:00"}),setTimeout(function(){e.setState({"time1":"2019-12-30 20:00:00"},function(){setTimeout(function(){e.setState({"time1":"2019-12-31 23:30:30"})},3e3)})},3e3)}},{"key":"render","value":function render(){var e=this.state,t=e.targetTime,n=e.count,a=e.time1;return l.default.createElement(s.View,{"className":"demo"},l.default.createElement(s.View,null,"目标时间： ",t),l.default.createElement(s.View,{"className":"m-t-2"},l.default.createElement(s.Input,{"className":"demo-input","type":"text","placeholder":"输入目标时间(符合日期格式)","onInput":this.onInput.bind(this,"targetTime")}),l.default.createElement(s.Button,{"size":"mini","type":"default","onClick":this.onBtnClick.bind(this,"targetTime")},"确定")),l.default.createElement(s.View,{"className":"m-t-2"},l.default.createElement(s.Input,{"className":"demo-input","type":"text","placeholder":"输入倒计秒数","onInput":this.onInput.bind(this,"count")}),l.default.createElement(s.Button,{"size":"mini","type":"default","onClick":this.onBtnClick.bind(this,"count")},"确定")),l.default.createElement(s.View,{"className":"demo-section"},l.default.createElement(s.View,{"className":"title"},"基础使用（时间倒计时）"),l.default.createElement(r.default,{"targetTime":t}),l.default.createElement(s.View,{"className":"title"},"基础使用（秒数倒计时）"),l.default.createElement(r.default,{"count":n,"onEnd":this.onTimeEnd.bind(this)}),l.default.createElement(r.default,{"className":"demo-class m-l-2","color":"#2196F3","count":n,"onTick":this.onCountTick.bind(this),"onEnd":this.onTimeEnd.bind(this)}),l.default.createElement(s.View,{"className":"title"},"异步赋值（3秒后），再3秒后目标时间为：2019-12-31 23:30:30"),l.default.createElement(r.default,{"targetTime":a}),l.default.createElement(s.View,{"className":"title"},"修改间隔符号"),l.default.createElement(r.default,{"targetTime":t,"symbol":"--"}),l.default.createElement(s.View,{"className":"title"},"修改字体颜色"),l.default.createElement(r.default,{"targetTime":t,"color":"#2196F3"})),l.default.createElement(s.View,{"className":"demo-section"},l.default.createElement(s.View,{"className":"title"},"自定义样式"),l.default.createElement(r.default,{"className":"demo-class","targetTime":t})),l.default.createElement(s.View,{"className":"demo-section"},l.default.createElement(s.View,{"className":"title"},"显示天数、时分秒"),l.default.createElement(s.View,null,l.default.createElement(r.default,{"className":"demo-class","showDay":!0,"targetTime":t})),l.default.createElement(s.View,{"className":"m-t-2"},l.default.createElement(r.default,{"className":"demo-class","showText":!0,"targetTime":t})),l.default.createElement(s.View,{"className":"m-t-2"},l.default.createElement(r.default,{"className":"demo-class","showDay":!0,"showText":!0,"targetTime":t,"symbol":"/"}))),l.default.createElement(s.View,{"className":"demo-section"},l.default.createElement(s.View,{"className":"title"},"倒计时过程事件"),l.default.createElement(s.View,{"className":"m-b-2"},"剩余秒数：",this.state.second),l.default.createElement(r.default,{"targetTime":t,"showText":!0,"showDay":!0,"color":"#2196F3","onTick":this.onTimeTick.bind(this)})),l.default.createElement(s.View,{"className":"demo-section"},l.default.createElement(s.View,{"className":"title"},"手动结束事件"),l.default.createElement(s.View,{"className":"m-b-2"},l.default.createElement(s.Button,{"size":"mini","type":"default","onClick":this.onCloseCountdown.bind(this,!0)},"结束倒计时")),l.default.createElement(r.default,{"targetTime":t,"isClose":this.state.isClose,"onEnd":this.onTimeEnd.bind(this)})))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Index}();u.options={"addGlobalClass":!0},t.default=u},"58":function(e,t,n){},"60":function(e,t,n){},"61":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=_interopRequireDefault(n(4)),i=_interopRequireDefault(n(1)),l=n(56);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}n(60);var s=function(e){function Countdown(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Countdown);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Countdown.__proto__||Object.getPrototypeOf(Countdown)).apply(this,arguments));return e.state={"day":"0","hour":"00","minute":"00","second":"00","countText":"0"},e.targetTimestamp=null,e.timer=null,e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Countdown,o.default.Component),a(Countdown,[{"key":"componentDidMount","value":function componentDidMount(){var e=this.props,t=e.targetTime,n=e.count;t?this.formatTargetTime(t):n&&this.setCountdown(n)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.targetTimestamp=null,clearInterval(this.timer)}},{"key":"componentDidHide","value":function componentDidHide(){this.targetTimestamp=null,clearInterval(this.timer)}},{"key":"componentDidShow","value":function componentDidShow(){var e=this.props,t=e.targetTime,n=e.count;t?this.formatTargetTime(t):n&&this.setCountdown(n)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){var t=e.targetTime,n=e.count;t&&t!==this.props.targetTime?this.formatTargetTime(t):n&&n!==this.props.count&&(clearInterval(this.timer),this.setCountdown(n))}},{"key":"setCountdown","value":function setCountdown(e){var t=this;if(!(e<=0)){var n=e;this.setState({"countText":n}),this.timer=setInterval(function(){n--,t.setState({"countText":n}),t.props.onTick&&t.props.onTick(n),n<=0&&(clearInterval(t.timer),t.onTimeEnd())},1e3)}}},{"key":"formatTargetTime","value":function formatTargetTime(e){if(e){var t=e.replace(/-/g,"/");this.targetTimestamp=new Date(t).getTime(),this.getRemainingSecond()}}},{"key":"getRemainingSecond","value":function getRemainingSecond(){if(this.targetTimestamp){var e=(new Date).getTime(),t=Math.floor((this.targetTimestamp-e)/1e3),n="",a="",o="",i="";t>0&&!this.props.isClose?(n=this.formatNum(parseInt(t/86400)),a=this.props.showDay?this.formatNum(parseInt(t%86400/3600)):this.formatNum(parseInt(t/3600)),o=this.formatNum(parseInt(t%3600/60)),i=this.formatNum(parseInt(t%3600%60)),this.timeTick(t)):(n="0",a=o=i="00",this.onTimeEnd()),this.setTimeState(n,a,o,i)}}},{"key":"setTimeState","value":function setTimeState(e,t,n,a){this.props.showText&&(t+="时",n+="分",a+="秒"),this.setState({"day":e,"hour":t,"minute":n,"second":a})}},{"key":"formatNum","value":function formatNum(e){return e>9?""+e:"0"+e}},{"key":"timeTick","value":function timeTick(e){var t=this;this.props.onTick&&this.props.onTick(e),setTimeout(function(){t.getRemainingSecond()},1e3)}},{"key":"onTimeEnd","value":function onTimeEnd(){this.targetTimestamp=null,this.props.onEnd&&this.props.onEnd()}},{"key":"render","value":function render(){var e=this.props,t=e.color,n=e.symbol,a=e.showDay,o=e.className,s=e.targetTime,r=this.state,u=r.day,c=r.hour,m=r.minute,f=r.second,d=r.countText,p="countdown ";o&&(p+=o);var h={"color":t};return s?i.default.createElement(l.View,{"className":p,"style":h},a&&"00"!==u&&i.default.createElement(l.Text,null,i.default.createElement(l.Text,{"className":"day"},u),i.default.createElement(l.Text,{"className":"day-text"},"天")),i.default.createElement(l.Text,null,i.default.createElement(l.Text,{"className":"hour"},c),i.default.createElement(l.Text,{"className":"symbol"},n)),i.default.createElement(l.Text,{"className":"minute"},m),i.default.createElement(l.Text,{"className":"symbol"},n),i.default.createElement(l.Text,{"className":"second"},f)):i.default.createElement(l.View,{"className":p,"style":h},i.default.createElement(l.Text,{"className":"second"},d))}}]),Countdown}();s.options={"addGlobalClass":!0},s.defaultProps={"targetTime":"","count":"","color":"inherit","showText":!1,"showDay":!1,"symbol":":","isClose":!1,"onTick":function onTick(){},"onEnd":function onEnd(){}},t.default=s}}]);